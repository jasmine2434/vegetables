<div class="container">
  <div class="row">
     <h2>マイページ</h2>
     </div>
    <!-- 左側のプロフィールセクション -->
    <div class="row">
    <div class="col-md-4 ml-md-1 mt-4">
      <%= render "public/users/profile", user: @user %>
    </div>

    <!-- 右側のボタンセクション -->
    <div class="col-md-3 offset-md-1 mt-4">
      <% if @user.email != "guest@example.com" %>
        <div class="mt-4">
          <%= link_to edit_user_path(@user.id), class: "btn btn-warning btn-block" do %>
            <i class="fa-solid fa-user-gear"></i> プロフィール編集
          <% end %>
        </div>
        <div class="mt-4">
          <%= link_to new_vegetable_path, class: "btn btn-primary btn-block" do %>
            <i class="fa-solid fa-pen"></i> 新規投稿
          <% end %>
        </div>
        <div class="mt-4">
          <%= link_to new_group_path, class: "btn btn-secondary btn-block" do %>
            <i class="fa-solid fa-user-group"></i> グループを作る
          <% end %>
        </div>
      <% end %>
    </div>
  </div>

  <!-- 投稿とグループの一覧 -->
  <div class="row">
    <!-- 投稿一覧 -->
    <div class="col-md-6 mt-4">
      <h3 class="text-center">投稿一覧</h3>
      <table class="table table-bordered mt-3 text-center">
        <thead class="thead-light">
          <tr>
            <th scope="col" style="width: 15%;">画像</th>
            <th scope="col" style="width: 20%;">名前</th>
            <th scope="col" style="width: 15%;">いいね数</th>
            <th scope="col" style="width: 15%;">コメント数</th>
          </tr>
        </thead>
        <tbody>
          <% @vegetables.each do |vege| %>
            <tr>
              <td><%= image_tag vege.get_image(80, 80) %></td>
              <td><%= link_to vege.name, vegetable_path(vege.id) %></td>
              <td><%= vege.favorites.count %></td>
              <td><%= vege.comments.count %></td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>

    <!-- グループ一覧 -->
    <div class="col-md-6 mt-4">
      <h3 class="text-center">グループ一覧</h3>
      <table class="table table-bordered mt-3 text-center">
        <thead class="thead-light">
          <tr>
            <th scope="col" style="width: 15%;">グループ画像</th>
            <th scope="col" style="width: 20%;">グループ名</th>
            <th scope="col" style="width: 15%;">人数</th>
            <th scope="col" style="width: 15%;">ステータス</th>
          </tr>
        </thead>
        <tbody>
          <% @groups.each do |group| %>
            <tr>
              <td><%= image_tag group.get_group_image(80, 80) %></td>
              <td><%= link_to group.name, group_path(group) %></td>
              <td><%= group.group_users.count %></td>
              <td><%= link_to '抜ける', group_group_users_path(group), method: :delete, class: "btn btn-sm btn-danger" %></td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
  </div>
</div>
